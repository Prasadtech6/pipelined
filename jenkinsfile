#!groovy

import groovy.json.JsonOutput
import groovy.json.JsonSlurper

def causes = currentBuild.rawBuild.getCauses()
for (cause in causes) {
    print cause
}

node () {
echo "Jenkinsfile"
  wrap([$class: 'BuildUser']) {
    def user = env.BUILD_USER_ID
      if  (env.BUILD_USER_ID == '${cause}'){
       build()
       sonarcube() 
       deploy() 
      }
}
}
     def build () {
         stage 'Build'
          echo "building the job"
}

     def sonarcube () {
         stage 'sonarcube'
          echo "code analusys on the job"
}

     def deploy () {
         stage 'deploy'
          echo "Deploying the code to QA"
          echo " job ran successfully"
}

